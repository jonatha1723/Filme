<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Galeria Local WebView</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
    font-family: Arial, sans-serif;
    background:#0f0f0f;
    color:#fff;
    margin:0;
    padding:15px;
}

h2{
    text-align:center;
}

.controls{
    text-align:center;
    margin-bottom:15px;
}

button{
    padding:10px 15px;
    margin:5px;
    border:none;
    border-radius:5px;
    background:#1e88e5;
    color:#fff;
    font-size:14px;
}

input{
    margin:10px 0;
}

.stats{
    text-align:center;
    font-size:13px;
    opacity:0.8;
}

.galeria{
    display:grid;
    grid-template-columns:repeat(auto-fill,minmax(110px,1fr));
    gap:10px;
    margin-top:15px;
}

.item{
    background:#1a1a1a;
    border-radius:6px;
    padding:5px;
    text-align:center;
}

.item img{
    width:100%;
    border-radius:5px;
}

.del{
    margin-top:5px;
    background:#e53935;
    font-size:12px;
    width:100%;
}
</style>
</head>

<body>

<h2>üìÅ Galeria Local WebView</h2>

<div class="controls">
    <input type="file" accept="image/*" id="inputImg">
    <br>
    <button onclick="salvarImagem()">Salvar</button>
    <button onclick="limparTudo()">Limpar tudo</button>
</div>

<div class="stats" id="stats"></div>

<div class="galeria" id="galeria"></div>

<script>
const input = document.getElementById('inputImg');
const galeria = document.getElementById('galeria');
const stats = document.getElementById('stats');

function salvarImagem(){
    const file = input.files[0];
    if(!file){
        alert("Selecione uma imagem");
        return;
    }

    const reader = new FileReader();
    reader.onload = function(e){
        let imagens = JSON.parse(localStorage.getItem("imagens")) || [];
        imagens.push(e.target.result);
        localStorage.setItem("imagens", JSON.stringify(imagens));
        input.value = "";
        carregarImagens();
    };
    reader.readAsDataURL(file);
}

function carregarImagens(){
    galeria.innerHTML = "";
    let imagens = JSON.parse(localStorage.getItem("imagens")) || [];

    stats.innerText = `Imagens salvas: ${imagens.length}`;

    imagens.forEach((img64, index)=>{
        const div = document.createElement("div");
        div.className = "item";

        const img = document.createElement("img");
        img.src = img64;

        const btn = document.createElement("button");
        btn.className = "del";
        btn.innerText = "Excluir";
        btn.onclick = ()=>deletarImagem(index);

        div.appendChild(img);
        div.appendChild(btn);
        galeria.appendChild(div);
    });
}

function deletarImagem(i){
    let imagens = JSON.parse(localStorage.getItem("imagens")) || [];
    imagens.splice(i,1);
    localStorage.setItem("imagens", JSON.stringify(imagens));
    carregarImagens();
}

function limparTudo(){
    if(confirm("Deseja apagar todas as imagens?")){
        localStorage.removeItem("imagens");
        carregarImagens();
    }
}

carregarImagens();
</script>

</body>
</html>